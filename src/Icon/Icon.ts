import { LitElement, html, unsafeCSS, nothing } from 'lit';
import { customElement, property } from 'lit/decorators.js';

import styles from './Icon.scss?inline';

/**
 * Icon names supported by this component.
 */
type IconName =
  | 'info'
  | 'error'
  | 'warning'
  | 'success'
  | 'close'
  | 'internet-lost'
  | 'info-service'
  | 'edit';

/**
 * Icon size variants.
 */
type IconVariant = 's' | 'm' | 'l';

const ICON_SVGS: Record<IconName, (size: number) => unknown> = {
  info: (size) => html`<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM12 10C11.4477 10 11 10.4477 11 11V16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16V11C13 10.4477 12.5523 10 12 10ZM12 7C11.4477 7 11 7.44771 11 8C11 8.55229 11.4477 9 12 9C12.5523 9 13 8.55229 13 8C13 7.44771 12.5523 7 12 7Z" fill="#2A68DA"/></svg>`,
  error: (size) => html`<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM12 15C11.4477 15 11 15.4477 11 16C11 16.5523 11.4477 17 12 17C12.5523 17 13 16.5523 13 16C13 15.4477 12.5523 15 12 15ZM12 7C11.4477 7 11 7.44772 11 8V13C11 13.5523 11.4477 14 12 14C12.5523 14 13 13.5523 13 13V8C13 7.44772 12.5523 7 12 7Z" fill="#CC3123"/></svg>`,
  warning: (size) => html`<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.2435 4.01715C11.0112 2.67906 12.9409 2.6767 13.7113 4.01324L21.7718 18.0015C22.5401 19.3347 21.5781 20.9993 20.0394 20.9996H3.95345C2.41629 20.9996 1.45317 19.3378 2.2181 18.0045L10.2435 4.01715ZM12.0003 15.9996C11.4482 15.9996 11.0006 16.4475 11.0003 16.9996C11.0003 17.5519 11.448 17.9996 12.0003 17.9996C12.5525 17.9994 13.0003 17.5517 13.0003 16.9996C13.0001 16.4476 12.5523 15.9997 12.0003 15.9996ZM12.0003 7.99957C11.4482 7.99957 11.0006 8.44748 11.0003 8.99957V13.9996C11.0003 14.5519 11.448 14.9996 12.0003 14.9996C12.5525 14.9994 13.0003 14.5517 13.0003 13.9996V8.99957C13.0001 8.44759 12.5523 7.99974 12.0003 7.99957Z" fill="#FF7300"/></svg>`,
  success: (size) => html`<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM16.6406 8.23145C16.2164 7.87791 15.585 7.93519 15.2314 8.35938L10.9316 13.5176L8.70703 11.293C8.31651 10.9024 7.68349 10.9024 7.29297 11.293C6.90244 11.6835 6.90244 12.3165 7.29297 12.707L10.293 15.707C10.4915 15.9056 10.7644 16.0116 11.0449 15.999C11.3256 15.9863 11.5887 15.8564 11.7686 15.6406L16.7686 9.64062C17.1221 9.21638 17.0648 8.58502 16.6406 8.23145Z" fill="#008700"/></svg>`,
  close: (size) => html`<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.79999 4.8L19.2 19.2M19.2 4.8L4.79999 19.2" stroke="#566271" stroke-width="1.5" stroke-linecap="round"/></svg>`,
  'internet-lost': (size) => html`<svg width="${size}" height="${size}" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.57715 4.75586L6.05273 7.23145C5.82028 7.35567 5.5928 7.49185 5.37109 7.63965C4.98815 7.89494 4.88435 8.41296 5.13965 8.7959C5.39496 9.17878 5.91298 9.28164 6.2959 9.02637C6.61636 8.81276 6.95266 8.63045 7.2998 8.47852L8.41309 9.5918C7.98307 9.70938 7.55373 9.87451 7.12695 10.0879C6.7155 10.2938 6.54911 10.7945 6.75488 11.2061C6.96075 11.6176 7.46145 11.7849 7.87305 11.5791C8.54345 11.2439 9.20451 11.0653 9.86523 11.0439L15.2441 16.4229C15.2538 16.4325 15.2644 16.4411 15.2744 16.4502C13.8377 17.6265 12.0017 18.333 10 18.333C5.39763 18.333 1.66699 14.6024 1.66699 10C1.66699 7.99825 2.37252 6.16139 3.54883 4.72461C3.55821 4.73498 3.56715 4.74586 3.57715 4.75586ZM10 1.66699C14.6024 1.66699 18.333 5.39763 18.333 10C18.333 12.0017 17.6265 13.8377 16.4502 15.2744C16.4411 15.2644 16.4325 15.2538 16.4229 15.2441L12.792 11.6133C12.9822 11.5421 13.1471 11.402 13.2451 11.2061C13.4509 10.7945 13.2845 10.2938 12.873 10.0879C12.1147 9.70873 11.3493 9.48098 10.583 9.4043L9.14844 7.96973C10.719 7.77187 12.3507 8.12424 13.7041 9.02637C14.087 9.28164 14.605 9.17878 14.8604 8.7959C15.1156 8.41296 15.0118 7.89494 14.6289 7.63965C12.5846 6.27683 10.0434 5.91598 7.73633 6.55762L4.75586 3.57715C4.74586 3.56715 4.73498 3.55821 4.72461 3.54883C6.16139 2.37252 7.99825 1.66699 10 1.66699ZM10 12.5C9.53987 12.5 9.16717 12.8729 9.16699 13.333C9.16699 13.7932 9.53976 14.167 10 14.167C10.4602 14.167 10.833 13.7932 10.833 13.333C10.8328 12.8729 10.4601 12.5 10 12.5Z" fill="#CC3123"/></svg>`,
  'info-service': (size) => html`<svg width="${size}" height=${size} viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10C0 4.47715 4.47715 0 10 0ZM12.1973 5.69141C11.9045 5.39877 11.4296 5.39898 11.1367 5.69141C10.8438 5.9843 10.8438 6.46004 11.1367 6.75293L13.7451 9.36133H5C4.58579 9.36133 4.25 9.69711 4.25 10.1113C4.25012 10.5254 4.58586 10.8613 5 10.8613H13.7451L11.1367 13.4697C10.8438 13.7626 10.8438 14.2374 11.1367 14.5303C11.4296 14.823 11.9044 14.8231 12.1973 14.5303L16.0859 10.6416C16.3788 10.3488 16.3787 9.87396 16.0859 9.58105L12.1973 5.69141Z" fill="#0056D2"/></svg>`,
  edit: (size) => html`<svg width="${size}" height="${size}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.7197 2C12.1339 2.00002 12.4697 2.33582 12.4697 2.75C12.4697 3.16418 12.1339 3.49998 11.7197 3.5H4.43164C3.98682 3.50003 3.79122 3.61115 3.70117 3.70117C3.61115 3.79121 3.50004 3.98686 3.5 4.43164V19.0078C3.50004 19.4526 3.61114 19.6483 3.70117 19.7383C3.79122 19.8283 3.98682 19.9394 4.43164 19.9395H19.0078C19.4526 19.9394 19.6482 19.8283 19.7383 19.7383C19.8283 19.6482 19.9394 19.4526 19.9395 19.0078V12.8408C19.9395 12.4267 20.2753 12.0908 20.6895 12.0908C21.1036 12.0909 21.4394 12.4267 21.4395 12.8408V19.0078C21.4394 19.6839 21.2693 20.3293 20.7988 20.7998C20.3284 21.2699 19.6837 21.4394 19.0078 21.4395H4.43164C3.75551 21.4394 3.11017 21.2703 2.63965 20.7998C2.16914 20.3293 2.00004 19.6839 2 19.0078V4.43164C2.00004 3.75575 2.16951 3.11109 2.63965 2.64062C3.11017 2.1701 3.75549 2.00003 4.43164 2H11.7197ZM16.7197 3.65918C17.841 2.53786 19.659 2.53786 20.7803 3.65918C21.9016 4.7805 21.9016 6.59842 20.7803 7.71973L11.2803 17.2197C11.1396 17.3604 10.9489 17.4395 10.75 17.4395H7.75C7.33581 17.4395 7.00003 17.1036 7 16.6895V13.6895C7 13.4906 7.07909 13.2998 7.21973 13.1592L16.7197 3.65918ZM19.7197 4.71973C19.1842 4.18419 18.3158 4.18419 17.7803 4.71973L8.5 14V15.9395H10.4395L19.7197 6.65918C20.2552 6.12365 20.2552 5.25526 19.7197 4.71973Z" fill="#0056D2"/></svg>`,
};

/**
 * LitIcon web component
 *
 * @summary Renders an SVG icon. Supports several built-in icons and three size variants.
 *
 * @property {IconName} icon - Name of the icon to display
 * @property {IconVariant} variant - Icon size variant: 's', 'm', or 'l'
 * @property {string} ariaLabel - Optional aria-label for accessibility
 */
@customElement('lit-icon')
export class LitIcon extends LitElement {
  /** Name of the icon to display */
  @property({ type: String })
  icon: IconName = 'info';

  /** Icon size variant: 's', 'm', or 'l' */
  @property({ type: String })
  variant: IconVariant = 'm';

  /** Optional aria-label for accessibility */
  @property({ type: String, attribute: 'aria-label' })
  ariaLabel = '';

  /**
   * Returns the pixel size for the given variant.
   */
  private getSize(): number {
    switch (this.variant) {
      case 'l':
        return 28;
      case 's':
        return 18;
      default:
        return 24;
    }
  }

  render() {
    const size = this.getSize();
    const svgRender = ICON_SVGS[this.icon]?.(size) ?? nothing;
    return html`
      <span
        class="icon icon--${this.icon} icon--${this.variant}"
        role="img"
        aria-label="${this.ariaLabel || this.icon}"
      >
        ${svgRender}
      </span>
    `;
  }

  static styles = unsafeCSS(styles);
}

declare global {
  interface HTMLElementTagNameMap {
    'lit-icon': LitIcon;
  }
}